<!DOCTYPE html>
<html lang="en">
    <head>
        <!--
            This file was generated from 2007/osx-terminal-holy-grail.md.
            Do not edit manually.
        -->
        <meta charset="utf-8" />
        <meta name="generator" content="pandoc" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

                <meta name="date" content="2007-05-15" />
        
                <meta name="category" content="computing, os x" />
        
        <title>The Mac OS X Terminal Holy Grail: mrxvt</title>

        
        
                <link rel="stylesheet" href="../base.css">
        
        
            </head>
    <body>
        <div class="documentwrapper">
        <p class="index">
            <a href="/">Home</a>
            | <a href="/years.html">Posts by Year</a>
            | <a href="/categories.html">Posts by Category</a>
        </p>
                <p class="date">2007-05-15</p>
        
        <h1 id="the-mac-os-x-terminal-holy-grail-mrxvt">The Mac OS X Terminal Holy Grail: mrxvt</h1>
        <p>I've been a bit unhappy with terminal offerings on OS X since I switched. I've spent a bit of time working with each iTerm, GLTerm, xterm, aterm, eterm, but always end up back with Terminal.app because it's fast and pretty. My wish list has always been speed and anti-aliased fonts. I use Gnu screen for tabs and don't mind using X11 coming from a Unix background. Recently I added 256-color support to my wish list which Terminal.app and xterm don't support (neither X11.app's version or the MacPorts version have it compiled in).</p>
        <p>I finally stumbled across <a href="http://materm.sourceforge.net/wiki/Main/Download">mrxvt</a>. It supports anti-aliased fonts, 256-colors and it's unbelievably fast! Eyeball the screenshot below--a 256-color terminal is <em>so</em> worth the effort--this is mrxvt running Gnu Screen running Vim.</p>
        <figure>
        <img src="./mrxvt-term.png" alt="Vim running in Gnu Screen running inside mrxvt" /><figcaption>Vim running in Gnu Screen running inside mrxvt</figcaption>
        </figure>
        <p>Although I had to compile it myself, I had no issues with the following: <code>./configure --enable-everything --disable-debug --disable-greek</code>. (Install the <code>no_debug_x</code> patch if you're compiling mrxvt-0.5.2 or it'll be very slow.)</p>
        <p>I also added the following to my <code>.Xresources</code>:</p>
        <pre><code>! --- mrxvt settings
        mrxvt*background: black
        mrxvt*foreground: white
        mrxvt*scrollBar: false
        mrxvt*loginShell: true
        mrxvt*autohideTabbar: true
        mrxvt*syncTabTitle: true
        mrxvt*hideButtons: true
        mrxvt*cursorBlink: true
        mrxvt*font: Monaco
        mrxvt*faceSize: 11
        mrxvt*cursorColor: red
        mrxvt*xft:True
        mrxvt*xftFont: Monaco
        mrxvt*xftSize:12
        mrxvt*xftAntialias:True
        mrxvt*termName: xterm-256color
        ! blue is usually too dark to see. this fixes that
        mrxvt*color4: RoyalBlue
        mrxvt*color12: RoyalBlue</code></pre>
        <p>The Gnu Screen from MacPorts is already compiled with 256-color support so putting the following in my .screenrc was the last step:</p>
        <pre><code>###############
        # 256 colours #
        ###############
        #
        #.. __: http://frexx.de/xterm-256-notes/
        #
        
        # terminfo and termcap for nice 256 color terminal
        # allow bold colors - necessary for some reason
        attrcolor b &quot;.I&quot;
        # tell screen how to set colors. AB=background, AF=foreground
        termcapinfo xterm &#39;Co#256:AB=\E[48;5;%dm:AF=\E[38;5;%dm&#39;
        # erase background with current bg color
        defbce &quot;on&quot;</code></pre>
        <h2 id="archived-comments">Archived Comments</h2>
        <dl>
        <dt>Ardekantur</dt>
        <dd><p>Does something special have to be done to allow mrxvt to see Mac OS X fonts? I just got my first Apple, and compiling mrxvt and using the .Xresources you’ve provided leaves me with the error messages:</p>
        <p>mrxvt: can’t load font “Monaco” mrxvt: Could not open file default.menu</p>
        <p>If this works, I’ll be very grateful. iTerm is noticeably slow.</p>
        <p>Thanks!</p>
        </dd>
        <dt>whiteinge</dt>
        <dd><p>Not sure about that one, Ardekantur. I have fontconfig via MacPorts installed, so maybe that’s it—but if so, I never manually ran or configured it. Have you tried re-creating your font-cache fc-cache?</p>
        <p>One other thing to check is, I seem to recall some path problem with fonts being in a few different places on OS X. I’ve seen suggestions that you create a /etc/X11/XftConfig file with the following:</p>
        <pre><code>dir &quot;/System/Library/Fonts&quot;
        dir &quot;/Library/Fonts&quot;
        dir &quot;~/Library/Fonts&quot;</code></pre>
        <p>Then restart X. But I didn’t have that file on my system…</p>
        <p>Drop another comment if any of these suggestion do or don’t pan out.</p>
        </dd>
        <dt>Ardekantur</dt>
        <dd><p>No luck, I’m afraid. It’s strange, though - mrxvt for me is in /usr/local/bin, and even if that path is set in both my .profile and .bash_login, X11 refuses to start a terminal that has that path. Maybe there’s some overreaching path problem with X11 and it not being able to find things.</p>
        </dd>
        <dt>Ardekantur</dt>
        <dd><p>Got it! I think I had to install fontconfig first, and then rebuild mrxvt. Thanks for your help!</p>
        </dd>
        <dt>whiteinge</dt>
        <dd><p>Awesome! Thanks for the update. I’ll have to research fontconfig now a bit…</p>
        </dd>
        <dt>P.Gr.</dt>
        <dd><p>This has been the most helpful guide to mrxvt on Mac OS X I have found. Great work! I just have one question. I have installed mrxvt, macports, and fontconfig and all of that works. Now I would like to add one more feature - how do I get window transparency working in mrxvt? If I type ‘mrxvt -o 25’ it creates a plain opaque window. I’m kind of a Unix noob, do I need Xcompmgr or something (and if so, how do I install it)?</p>
        </dd>
        <dt>whiteinge Says:</dt>
        <dd><p>To the best of my knowledge there is no way to get actual transparency in Apple’s X11.app because it requires XFree86 6.8 with transparency support built-in. Apple appears to be running XFree86 4.4 still and I’ve only heard rumors about X11 updates for Leopard.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
        <p>Apparently you can get pseudo-transparency working, but I couldn’t get it to work very reliably. Pseudo-transparency, just in case you’re not familiar with it, is setting an X11 background image (you can see it if you enter X11.app’s full-screen mode), then the terminal program (usually Eterm, aterm, or mrxvt) fakes transparency by displaying the part of the background image that it’s covering in it’s own window. It’s an interesting hack, and it helps to see it in action to understand what it’s doing.</p>
        <p>If you want to try pseudo-transparency, use MacPorts to install Eterm, then try <code>Esetroot -f /path/to/your/background/image.jpg</code> then start up <code>Eterm</code>. I stopped trying to get it to work with mrxvt though since I couldn’t get the background image to stop changing by itself. :-(</p>
        </dd>
        <dt>P.Gr. Says:</dt>
        <dd><p>Cool, I got pseudo-transparency working. I like the effect. I added Esetroot to my .xinitrc file, it seems to load the background image correctly and consistently display the right one with mrxvt. Wish I knew how to fix your background image problem.</p>
        <p>Terminal 2 looks nice. Here’s hoping they add 256-colors…</p>
        </dd>
        <dt>duckpond Says:</dt>
        <dd><p>One of my office machine has the xterm-256color entry in /usr/share/terminfo/78/, but in my newly build osx86, I don’t see ther terminfo xterm-256color anywhere, so I am guessing maybe I should install or upgrade some package to have that particular terminfo? what package should I reinstall?</p>
        </dd>
        <dt>whiteinge Says:</dt>
        <dd><p>You can try copying the xterm-256color file from one computer to the other. That worked for me for a while with screen-256color until MacPorts updated their GNU screen package.</p>
        <p>In direct answer to your question: it appears that the xterm-256color file belongs to the ncurses package in MacPorts (ncursesw). (I’m not sure about Fink.)</p>
        </dd>
        <dt>duckpond Says:</dt>
        <dd><p>mrxvt install was a success, vim and emacs can all work on 256 colors mode. for emacs, the xterm-256color.el was not there by default, you’ll need to drop a copy to the $EMACS_HOME/lisp/term/ directory.</p>
        <p>also installed ncursesw via MacPorts (now called DarwinPorts?), and terminfo for xterm-256color were installed by the package. I tried:</p>
        <p>TERM=xterm-256color vim</p>
        <p>just in the regular Terminal.app, vim then gave me a blinking screen, is the terminfo can only be recognized by X11 applications?</p>
        <p>thanks,</p>
        </dd>
        <dt>axolx</dt>
        <dd><p>NO UTF8 SUPPORT? Thats is unacceptable for me in 21st century computing. You should note that somewhere in your article, as I took it for granted and spent a bunch of time setting mrxvt in my system only to find out it lacks UTF8 support.</p>
        </dd>
        <dt>whiteinge Says:</dt>
        <dd><p>It’s a fair complaint; I am also looking forward to unicode support in mrxvt. Although I think it is a mistake to take unicode support for granted in a terminal environment. There is so much legacy code out there, it will be a long while still before command-line unicode becomes commonplace. For example, I see command-line encoding problems almost daily as I work (as a web developer) — even when using Terminal.app or other UTF-aware terminals.</p>
        </dd>
        </dl>
        <section class="footnotes">
        <hr />
        <ol>
        <li id="fn1"><p>Side note, I just stumbled across Terminal 2 on Apple’s site. That should be interesting to see in November. <a href="http://www.apple.com/macosx/leopard/technology/unix.html" class="uri">http://www.apple.com/macosx/leopard/technology/unix.html</a><a href="#fnref1" class="footnote-back">↩</a></p></li>
        </ol>
        </section>

                </div>
    </body>
</html>
